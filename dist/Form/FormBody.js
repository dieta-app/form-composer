"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.FormBody=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _styledComponents=_interopRequireWildcard(require("styled-components"));var _FormProvider=require("./FormProvider");var _Questions=_interopRequireDefault(require("./Questions"));var _jsxFileName="/Users/bneigher/Desktop/Dieta/form-composer/src/Form/FormBody.js";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var fadeInRight=(0,_styledComponents.keyframes)(["0%{opacity:0;}100%{opacity:1;}"]);var fadeInLeft=(0,_styledComponents.keyframes)(["0%{opacity:0;}100%{opacity:1;}"]);var FormBodyContainer=_styledComponents.default.div.withConfig({displayName:"FormBodyContainer",componentId:"sc-1oky1ku-0"})(["display:flex;flex:1;flex-direction:column;align-content:center;justify-content:center;margin-bottom:",";animation:"," 0.2s linear;overflow-x:hidden;"],function(props){return props.noFooter?0:'80px';},fadeInRight);var FormBodyQuestionContainer=_styledComponents.default.div.withConfig({displayName:"FormBodyQuestionContainer",componentId:"sc-1oky1ku-1"})(["flex:1;flex-direction:row;"]);var FormBodyQuestionLabel=_styledComponents.default.h2.withConfig({displayName:"FormBodyQuestionLabel",componentId:"sc-1oky1ku-2"})(["margin:0;padding:5px 0;font-family:proxima-nova;"]);var FormBodyContentHeader=_styledComponents.default.h2.withConfig({displayName:"FormBodyContentHeader",componentId:"sc-1oky1ku-3"})(["margin:auto;text-align:center;padding:5px 0;font-family:proxima-nova;"]);var FormBodyQuestionSubtext=_styledComponents.default.h4.withConfig({displayName:"FormBodyQuestionSubtext",componentId:"sc-1oky1ku-4"})(["margin:0;padding:5px 0 0 0;font-family:proxima-nova;font-weight:100;"]);var FormBodyContentSubtext=_styledComponents.default.h4.withConfig({displayName:"FormBodyContentSubtext",componentId:"sc-1oky1ku-5"})(["margin:auto;text-align:center;padding:5px 0 0 0;font-family:proxima-nova;font-weight:100;"]);var FormBodyQuestion=_styledComponents.default.h3.withConfig({displayName:"FormBodyQuestion",componentId:"sc-1oky1ku-6"})(["margin:0;padding:5px 0;font-family:proxima-nova;"]);var FormBodyAnswers=_styledComponents.default.div.withConfig({displayName:"FormBodyAnswers",componentId:"sc-1oky1ku-7"})(["width:",";@media (min-width:472px){margin:auto;}padding-top:",";display:flex;flex:1;flex-direction:row;overflow-x:auto;width:100%;justify-content:center;"],function(props){return props.fullScreen?"100%":"auto";},function(props){return props.noTopSpacing?"10px":"40px";});var FormBody=function(_Component){(0,_inherits2.default)(FormBody,_Component);var _super=_createSuper(FormBody);function FormBody(){var _this;(0,_classCallCheck2.default)(this,FormBody);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{activeState:[]});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"computeComponent",function(context){var Component=_react.default.createElement(_react.default.Fragment,null);if(context.activeStateContent.component){var props=context.activeStateContent.component.props;Component=_react.default.createElement(_Questions.default[context.activeStateContent.component.element],context.activeStateContent.answer?_objectSpread(_objectSpread({},props),{},{answer:context.activeStateContent.answer}):props);}else{Component=_react.default.createElement(_react.default.Fragment,null,_this.props.children);}return Component;});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderQuestionPreContent",function(context){return _react.default.createElement("div",{__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:7}},!context.static?_react.default.createElement(FormBodyQuestionLabel,{__source:{fileName:_jsxFileName,lineNumber:151,columnNumber:11}},"Question ",context.activeStateContent.questionLabel):_react.default.createElement(_react.default.Fragment,null),_react.default.createElement(FormBodyQuestion,{__source:{fileName:_jsxFileName,lineNumber:156,columnNumber:11}},context.activeStateContent.questionPrefix?context.activeStateContent.questionPrefix+" ":"",context.activeStateContent.question),!context.static?context.activeStateContent.questionSubtext?_react.default.createElement(FormBodyQuestionSubtext,{__source:{fileName:_jsxFileName,lineNumber:164,columnNumber:15}},context.activeStateContent.questionSubtext):_react.default.createElement(_react.default.Fragment,null):_react.default.createElement(_react.default.Fragment,null));});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderContentPreContent",function(context){return _react.default.createElement("div",{__source:{fileName:_jsxFileName,lineNumber:176,columnNumber:7}},_react.default.createElement(FormBodyContentHeader,{__source:{fileName:_jsxFileName,lineNumber:177,columnNumber:9}},context.activeStateContent.checkpoint),context.activeStateContent.checkpointSubtext&&_react.default.createElement(FormBodyContentSubtext,{__source:{fileName:_jsxFileName,lineNumber:181,columnNumber:11}},context.activeStateContent.checkpointSubtext));});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderPreContent",function(context,type){switch(type){case"question":return _this.renderQuestionPreContent(context);case"content":return _this.renderContentPreContent(context);default:return _this.renderQuestionPreContent(context);}});return _this;}(0,_createClass2.default)(FormBody,[{key:"componentDidMount",value:function componentDidMount(){this.setState({activeState:this.context.activeState});}},{key:"componentDidUpdate",value:function componentDidUpdate(){var _this2=this;if(this.state.activeState!==this.context.activeState){var pastIndex=this.context.ordering.findIndex(function(stateMap){return _this2.state.activeState===stateMap;});var newIndex=this.context.ordering.findIndex(function(stateMap){return _this2.context.activeState===stateMap;});if(pastIndex<newIndex){console.log("animate right");}else{console.log("animate left");}this.setState({activeState:this.context.activeState});}}},{key:"render",value:function render(){var _this3=this;return _react.default.createElement("div",{style:{margin:"10px"},__source:{fileName:_jsxFileName,lineNumber:202,columnNumber:7}},_react.default.createElement(_FormProvider.FormConsumer,{__source:{fileName:_jsxFileName,lineNumber:207,columnNumber:9}},function(context){var Component=_this3.computeComponent(context);var ComponentStatics=context.activeStateContent.component?_Questions.default[context.activeStateContent.component.element]:null;var containerProps=ComponentStatics?ComponentStatics.containerProps:{};var componentType=ComponentStatics?ComponentStatics.type:"question";return _react.default.createElement(FormBodyContainer,{__source:{fileName:_jsxFileName,lineNumber:221,columnNumber:15}},_react.default.createElement(FormBodyQuestionContainer,{__source:{fileName:_jsxFileName,lineNumber:222,columnNumber:17}},_this3.renderPreContent(context,componentType)),_react.default.createElement(FormBodyAnswers,(0,_extends2.default)({},containerProps,{__source:{fileName:_jsxFileName,lineNumber:226,columnNumber:17}}),Component));}));}}]);return FormBody;}(_react.Component);exports.FormBody=FormBody;(0,_defineProperty2.default)(FormBody,"propTypes",{});(0,_defineProperty2.default)(FormBody,"defaultProps",{noFooter:false});FormBody.contextType=_FormProvider.FormContext;