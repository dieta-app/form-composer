"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleTextInputQuestion=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _styledComponents=_interopRequireWildcard(require("styled-components"));var _propTypes=_interopRequireDefault(require("prop-types"));var _FormProvider=require("../FormProvider");var _TextField=_interopRequireDefault(require("@material-ui/core/TextField"));var _lodash=_interopRequireDefault(require("lodash.debounce"));var _jsxFileName="/Users/bneigher/Desktop/Dieta/form-composer/src/Form/Questions/SimpleTextInputQuestion.js";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var QuestionContainer=_styledComponents.default.div.withConfig({displayName:"QuestionContainer",componentId:"sc-1619i46-0"})(["display:flex;flex:1;flex-direction:column;min-width:275px;max-width:300px;margin:2px;"]);var ChoiceContainer=function(_Component){(0,_inherits2.default)(ChoiceContainer,_Component);var _super=_createSuper(ChoiceContainer);function ChoiceContainer(){var _this;(0,_classCallCheck2.default)(this,ChoiceContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{touched:false,error:false,answer:_this.props.answer[0]});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"handleChange",(0,_lodash.default)(function(){_this.props.onChange(_this.state.answer);},1000));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onChange",function(event){_this.setState({touched:true,error:_this.checkValid(event.target.value),answer:event.target.value});_this.handleChange();});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"checkValid",function(answer){if(_this.props.pattern){var regex=RegExp(_this.props.pattern.body,_this.props.pattern.flags);if(regex.test(answer)){return false;}else{return true;}}return false;});return _this;}(0,_createClass2.default)(ChoiceContainer,[{key:"render",value:function render(){return _react.default.createElement("div",{__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:7}},_react.default.createElement(_TextField.default,{id:"generic",autoFocus:true,label:this.props.label,fullWidth:true,margin:"normal",error:this.state.error,variant:"outlined",value:this.state.answer||'',onChange:this.onChange,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:9}}));}}]);return ChoiceContainer;}(_react.Component);(0,_defineProperty2.default)(ChoiceContainer,"propTypes",{optional:_propTypes.default.bool.isRequired,answer:_propTypes.default.array.isRequired,label:_propTypes.default.string.isRequired,onChange:_propTypes.default.func.isRequired,pattern:_propTypes.default.shape({body:_propTypes.default.string,flags:_propTypes.default.string})});(0,_defineProperty2.default)(ChoiceContainer,"defaultProps",{optional:false,answer:[],label:"",onChange:function onChange(){},pattern:{"body":"[a-zA-Z0-9]+","flags":"gi"}});var SimpleTextInputQuestion=function(_Component2){(0,_inherits2.default)(SimpleTextInputQuestion,_Component2);var _super2=_createSuper(SimpleTextInputQuestion);function SimpleTextInputQuestion(){var _this2;(0,_classCallCheck2.default)(this,SimpleTextInputQuestion);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"onChange",function(question,choice,cb,context){if(!context.static){if(cb&&typeof cb==="function"){cb({question:question,answer:[choice]},context);}}});return _this2;}(0,_createClass2.default)(SimpleTextInputQuestion,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidUpdate",value:function componentDidUpdate(){}},{key:"render",value:function render(){var _this3=this;return _react.default.createElement(_styledComponents.ThemeContext.Consumer,{__source:{fileName:_jsxFileName,lineNumber:115,columnNumber:7}},function(themeContext){return _react.default.createElement(_FormProvider.FormConsumer,{__source:{fileName:_jsxFileName,lineNumber:118,columnNumber:13}},function(context){return _react.default.createElement(QuestionContainer,{__source:{fileName:_jsxFileName,lineNumber:121,columnNumber:19}},_react.default.createElement(ChoiceContainer,{optional:_this3.props.optional,key:context.activeState,context:context,answer:_this3.props.answer,label:_this3.props.label,pattern:_this3.props.pattern,onChange:function onChange(choice){return _this3.onChange(context.activeStateContent.question,choice,context.cb,context);},__source:{fileName:_jsxFileName,lineNumber:122,columnNumber:21}}));});});}}]);return SimpleTextInputQuestion;}(_react.Component);exports.SimpleTextInputQuestion=SimpleTextInputQuestion;(0,_defineProperty2.default)(SimpleTextInputQuestion,"propTypes",{answer:_propTypes.default.array.isRequired});(0,_defineProperty2.default)(SimpleTextInputQuestion,"defaultProps",{answer:[]});