"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.FormFooter=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _styledComponents=_interopRequireDefault(require("styled-components"));var _propTypes=_interopRequireDefault(require("prop-types"));var _FormProvider=require("./FormProvider");var _Button=_interopRequireDefault(require("../Button"));var _jsxFileName="/Users/bneigher/Desktop/Dieta/form-composer/src/Form/FormFooter.js";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var FormFooterContainer=_styledComponents.default.div.withConfig({displayName:"FormFooterContainer",componentId:"sc-1sbydhw-0"})(["display:flex;flex:1;width:100%;flex-direction:row;align-content:center;justify-content:center;background-color:",";height:","px;position:fixed;bottom:0;left:0;right:0;"],function(props){return props.theme.colors.PRIMARY_DARK;},function(props){return props.bottomSpaceHeight?props.bottomSpaceHeight+85:85;});var noAutoFocus=["SimpleTextInputQuestion"];var FormFooter=function(_Component){(0,_inherits2.default)(FormFooter,_Component);var _super=_createSuper(FormFooter);function FormFooter(){(0,_classCallCheck2.default)(this,FormFooter);return _super.apply(this,arguments);}(0,_createClass2.default)(FormFooter,[{key:"keyHandling",value:function keyHandling(e){if(this.context){if(e.keyCode===37){this.context.previousState();}if(e.keyCode===39||e.keyCode===13){if(!!this.context.activeStateContent.complete){this.context.nextState();}}}}},{key:"componentDidMount",value:function componentDidMount(){window.removeEventListener("keyup",this.keyHandling.bind(this));window.addEventListener("keyup",this.keyHandling.bind(this));}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("keyup",this.keyHandling.bind(this));}},{key:"render",value:function render(){var _this=this;return _react.default.createElement(_FormProvider.FormConsumer,{__source:{fileName:_jsxFileName,lineNumber:59,columnNumber:7}},function(context){if(!!context.activeStateContent.complete&&!noAutoFocus.includes(context.activeStateContent.component.element)){setTimeout(function(){_this.nextButton&&_this.nextButton.focus();},0);}return _react.default.createElement(FormFooterContainer,{bottomSpaceHeight:_this.props.bottomSpaceHeight,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:13}},_react.default.createElement("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",marginLeft:10,marginRight:10,marginTop:10,marginBottom:_this.props.bottomSpaceHeight+10},__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:15}},_react.default.createElement(_Button.default,{height:'50px',fontSize:'24px',ref:function ref(c){return _this.nextButton=c;},onClick:context.nextState,disabled:!!!(context.activeStateContent.complete||context.checkStateComplete(context.activeStateContent.answer)),__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:17}},context.activeState===context.ordering[context.ordering.length-1]?"Finish":"Continue")));});}}]);return FormFooter;}(_react.Component);exports.FormFooter=FormFooter;(0,_defineProperty2.default)(FormFooter,"propTypes",{bottomSpaceHeight:_propTypes.default.number});(0,_defineProperty2.default)(FormFooter,"defaultProps",{bottomSpaceHeight:0});FormFooter.contextType=_FormProvider.FormContext;